<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Teacher Portal</title>
    <link href="../static/images/icon.png" rel="shortcut icon" type="image/png">
    <!--Code Begins Here!-->
    <meta content="width=device-width, initial-scale=1" name="viewport">
    <!Css File>
    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" id="bootstrap-css" rel="stylesheet">
    <link href="../static/test2.css" rel="stylesheet">
    <!--Modal Stuff-->
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.2.1/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.2.1/js/bootstrap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.6.0/Chart.min.js"></script>

</head>
<body>

<div class="grid-container">
    <!--Alerts Title Section with useful info-->
    <div class="Alerts">
        <div align="left" id="alerthead">You have <strong>{{ _outstanding }}</strong> assignments due to mark
        </div>
        <br>
        <div align="left" id="alerthead">Your average mark is <strong>{{ _avgMark }} %</strong></div>
    </div>
    <!--Alerts Content with useful info-->
    <div class="AlertsText">
        <h4>Important Information - Next Assignment</h4>
        <div align="center">Students must submit their {{ _nextUpClass }} assignment by {{ _nextUpDate }}!</div>
        <div align="center">
            <br>
            <button class="btn btn-info btn-sm" data-target="#viewAssign" data-toggle="modal" id="userButton"
                    type="button">View Assignment -- MAKE THIS BUTTON WORK??
            </button>
        </div>
    </div>

    <!--Graphs Title Section with useful info-->
    <div class="Title1">
        <div align=left"><h5>Overall Average Grades</h5></div>

        <!--DETAILS NEEDED FOR GRAPHS HERE-->
        <div hidden=hidden>
            <p id="class1Name">{{ _class1Name }}</p>
            <p id="class2Name">{{ _class2Name }}</p>
            <p id="class3Name">{{ _class3Name }}</p>
            <p id="class1Avg">{{ _class1Avg }}</p>
            <p id="class2Avg">{{ _class2Avg }}</p>
            <p id="class3Avg">{{ _class3Avg }}</p>
        </div>
        <!-- ## MAKING A GRAPH ## -->
        <div class="container">
            <canvas height="50" id="AverageGrades" width="200"></canvas>
        </div>
    </div>
    <!--Graphs Content Section with useful info-->
    <div class="Graph"><h5>Class Specific Statstics</h5>
        <div align="left">{{ _class1Name }}:</div>
        <h6>The strongest student (on average): <strong> {{ _class1HighStu }}</strong></h6>
        <h6>With and average mark of: <strong> {{ _class1HighStuMark }}</strong></h6>
        <div align="left">{{ _class2Name }}:</div>
        <h6>The strongest student (on average): <strong> {{ _class2HighStu }}</strong></h6>
        <h6>With and average mark of: <strong> {{ _class2HighStuMark }}</strong></h6>
        <div align="left">{{ _class3Name }}:</div>
        <h6>The strongest student (on average): <strong> {{ _class3HighStu }}</strong></h6>
        <h6>With and average mark of: <strong> {{ _class3HighStuMark }}</strong></h6>

    </div>
    <!------------------------------------>
    <!--Table showing due submissions-->
    <!------------------------------------>
    <!--Current Assignment Content Section with useful info-->
    <div class="Title2"><strong>Assignments Still Due</strong></div>
    <div class="Assignments">
        <table>
            <tr>
                <th>Title</th>
                <th>Task</th>
                <th>Subject</th>
                <th>Due</th>
                <th>File</th>
            </tr>
            <!--Assignment 1 -->
            <td>{{ _ass1DueTitle }}</td>
            <td>{{ _ass1DueDetail }}</td>
            <td> {{ _ass1DueSub }}</td>
            <td> {{ _ass1DueDate }}</td>
            <td>
                <button class="btn btn-info btn-sm" data-target="#viewAssign1" data-toggle="modal" id="userButton"
                        type="button">View Assignment
                </button>
            </td>
            </tr>
            <!--Assignment 2 -->
            <td>{{ _ass2DueTitle }}</td>
            <td>{{ _ass2DueDetail }}</td>
            <td> {{ _ass2DueSub }}</td>
            <td> {{ _ass2DueDate }}</td>
            <td>
                <button class="btn btn-info btn-sm" data-target="#viewAssign2" data-toggle="modal" id="userButton"
                        type="button">View Assignment
                </button>
            </td>
            </tr>

            </td>
            <!--Assignment 3 -->
            <td>{{ _ass3DueTitle }}</td>
            <td>{{ _ass3DueDetail }}</td>
            <td> {{ _ass3DueSub }}</td>
            <td> {{ _ass3DueDate }}</td>
            <td>
                <button class="btn btn-info btn-sm" data-target="#viewAssign3" data-toggle="modal" id="userButton"
                        type="button">View Assignment
                </button>
            </td>
            </tr>
            <tr>
        </table>

    </div>
    <!------------------------------------>
    <!--Table showing past 3 submissions-->
    <!------------------------------------>
    <div class="Title3"><strong>Previous Assignments</strong></div>
    <div class="Previous">
        <table class="asssignment">
            <tr>
                <th>Title</th>
                <th>Class</th>
                <th>Grade</th>
                <th>View</th>
            </tr>
            <tr>
                <!--Assignment 1 -->
                <td>{{ _ass1name }}</td>
                <td>{{ _ass1class }}</td>
                <td>{{ _ass1mark }}</td>
                <td>
                    <button class="btn btn-info btn-sm" data-target="#viewPast1" data-toggle="modal" id="userButton"
                            type="button">View
                    </button>
                </td>
            <tr>
                <!--Assignment 2 -->
                <td>{{ _ass2name }}</td>
                <td>{{ _ass2class }}</td>
                <td>{{ _ass2mark }}</td>
                <td>
                    <button class="btn btn-info btn-sm" data-target="#viewPast2" data-toggle="modal" id="userButton"
                            type="button">View
                    </button>
                </td>
            <tr>
                <!--Assignment 3 -->
                <td>{{ _ass3name }}</td>
                <td>{{ _ass3class }}</td>
                <td>{{ _ass3mark }}</td>
                <td>
                    <button class="btn btn-info btn-sm" data-target="#viewPast3" data-toggle="modal" id="userButton"
                            type="button">View
                    </button>
                </td>
            </tr>
            <tr>
        </table>
    </div>


    <!--Sidebar items here-->
    <div class="Sidebar"><img alt id="logo" src="../static/images/logo.png""Test Logo">
        <!-- Control Buttons -->
        <div align="center" id="controlB">
            <p>This is a {{ _userType }} account</p>
            <a class="btn btn-info btn-sm " href="login">Logout</a>
            <!--MODAL TEST BUTTON FOR ADDING NEW ASSIGNMENT-->

        </div>
        <p align="middle"><img alt="Persons face" id="stuFace" src="../static/images/Blank-Person-Image.png"></p>
        <!--Variables-->
        <div align="center" id="studentVariables">

            <h4 align="middle">{{ _userFName }} {{ _userLName }}</h4>
            <p align="middle">{{ _userEmail }}</p>
            <br>
            <h5>Admin Tasks</h5>
            <div>
                <button class="btn btn-info btn-sm" data-target="#addAssign" data-toggle="modal" id="userButton"
                        type="button">
                    Add Assignment
                </button>
            </div>
            <br>
            <div>
                <button class="btn btn-info btn-sm" data-target="#classManager" data-toggle="modal" id="userButton"
                        type="button">
                    Class Manager
                </button>
            </div>
            <br>
            <div>
               <button class="btn btn-info btn-sm" data-target="#passManage" data-toggle="modal" id="userButton" type="button">
                    Password Management
                </button>
                <br>
            </div>
            <h5>Next Assignment Due</h5>
            <br>
            <p>Subject: {{ _nextAssDueSub }}</p>
            <p>Assignment: {{ _nextAssDueDetail }}</p>
            <p>Date Due: {{ _nextAssDueDate }}</p>
            <br>
        </div>
        <!--Help Buttons-->
        <div align="center">
            <div class="inline-block"><a href="login"><img alt="Exit" height="32" src="../static/images/exit.png"
                                                           title="Exit" width="32"></a>
                <div class="inline-block"><a href="login"><img alt="Help" height="32"
                                                               src="../static/images/question.png"
                                                               title="Help" width="32"></a>
                    <div class="inline-block"><a href="login"><img alt="Gear" height="32"
                                                                   src="../static/images/gear.png"
                                                                   title="Gear" width="32"></a>
                    </div>
                </div>
            </div>

            <!--Modal Box for adding new assignments-->
            <!-- The Modal -->
            <div class="modal fade" id="addAssign2">
                <div class="modal-dialog modal-lg">
                    <div class="modal-content">

                        <!-- Modal Header -->
                        <div class="modal-header">
                            <h4 class="modal-title">Create New Assignment</h4>
                            <button class="close" data-dismiss="modal" type="button">&times;</button>
                        </div>

                        <!-- Modal body -->
                        <div>
                            <form action="addAssign" class="form-assign" method="POST">
                                <!--Assessment Title-->
                                <label class="sr-only" for="assessTitle">assessTitle</label>
                                <input class="form-control" id="inputTitle" name="assessTitle"
                                       placeholder="Assessment Title"
                                       type="assessTitle">
                                <!--Assessment Details-->
                                <div class="modal-header">
                                    <h6 class="modal-title">Assignment Details</h6>
                                </div>
                                <label class="sr-only" for="taskDetail">taskDetail</label>
                                <textarea autofocus class="form-control" id="inputDetail" name="taskDetail"
                                          placeholder="Task Details" required rows="10" type="taskDetail">
                               </textarea>
                                <!--Due Date-->
                                <label class="sr-only" for="dueDate">Due Date</label>
                                <input autofocus class="form-control" id="inputDue" name="dueDate"
                                       placeholder="Due Date"
                                       required type="due">
                                <!--Class ID-->
                                <label class="sr-only" for="classID">classID</label>
                                <input class="form-control" id="classID" name="classID" placeholder="Class ID"
                                       type="classID">
                        </div>
                        <!-- Modal footer -->
                        <div class="modal-footer">
                            <button class="btn btn-info btn-primary btn-sm" id="btnAddAssign" type="addAssign">Save
                                Assignment
                            </button>
                            <!--Commit Data-->
                            <button class="btn btn-info btn-sm" data-dismiss="modal" type="button">Close</button>
                            </form>
                        </div>

                    </div>
                </div>
            </div>

            <!--Modal Box for adding new assignments WITH FILE UPLOAD ENABLED-->
            <!-- The Modal -->
            <div class="modal fade" id="addAssign">
                <div class="modal-dialog modal-lg">
                    <div class="modal-content">
                        <!-- Modal Header -->
                        <div class="modal-header">
                            <h4 class="modal-title">Create New Assignment</h4>
                            <button class="close" data-dismiss="modal" type="button">&times;</button>
                        </div>
                        <!-- Modal body -->
                        <div>
                            <!--LONGBLOB FILE UPLOAD-->
                            <div class="container">
                                <h6>File Input</h6>
                                <form action="/addSub" enctype="multipart/form-data" method="POST">
                                    <div class="form-group">
                                        <input name="inputfile" type='file'>
                                    </div>
                                    <div>
                                        <!--Assignment title-->
                                        <label class="sr-only" for="assTitle">assTitle</label>
                                        <input class="form-control" id="assTitle" name="assTitle"
                                               placeholder="Assignment Title"
                                               type="assTitle">
                                        <!--Date-->
                                        <label class="sr-only" for="date">date</label>
                                        <input class="form-control datepicker" id="date" name="date"
                                               placeholder="Submission Date"
                                               type="date">
                                        <!--task details-->
                                        <div class="modal-header">
                                            <h6 class="modal-title">Task Details</h6>
                                        </div>
                                        <label class="sr-only" for="taskDetails">taskDetails</label>
                                        <textarea autofocus class="form-control" id="taskDetails" name="taskDetails"
                                                  placeholder="taskDetails" required rows="10" type="taskDetails">
                                </textarea>
                                        <!--User ID-->
                                        <label class="sr-only" for="classID">classID</label>
                                        <input class="form-control" id="classID" name="classID" placeholder="classID"
                                               type="classID">
                                    </div>
                                    <!--<button class="btn btn-default" type="btnAddSub">Submit</button>-->
                                    <button class="btn btn-info btn-primary btn-sm" id="btnAddSub" type="addSub">Save
                                        Submission
                                    </button>
                                </form>
                            </div>

                        </div>

                        <!-- Modal footer -->
                        <div class="modal-footer">
                            <!--<button class="btn btn-info btn-primary btn-sm" id="btnAddAssign" type="addSub">Save Submission
                            </button>
                            <!--Commit Data-->
                            <button class="btn btn-info btn-sm" data-dismiss="modal" type="addSub">Close</button>
                            </form>
                        </div>

                    </div>
                </div>
            </div>

            <!--Modal Box for class management-->
            <!--ADDING AND REMOVING STUDENTS-->
            <!--Modal Box for class management-->
            <!-- The Modal -->
            <div class="modal fade" id="classManager">
                <div class="modal-dialog modal-lg">
                    <div class="modal-content">
                        <!-- Modal Header -->
                        <div class="modal-header">
                            <h4 class="modal-title">Class Manager</h4>
                            <button class="close" data-dismiss="modal" type="button">&times;</button>
                        </div>
                        <!-- Modal body -->
                        <div>
                            <div class="container">
                                <h6>Remove Students from Classes</h6>
                                <button class="btn btn-info btn-sm" data-target="#classManageRemoveName"
                                        data-toggle="modal" id="userButton" type="button">
                                    Remove Class Members
                                </button>
                                <button class="btn btn-info btn-sm" data-target="#classManageAddName"
                                        data-toggle="modal" id="userButton" type="button">
                                    Add Class Members
                                </button>
                                <br>
                                <div class="modal-footer">
                                    <button class="btn btn-info btn-sm" data-dismiss="modal" type="classManager">Close
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!--Removing Students from classes-->
            <!--Modal Box for class management-->
            <!-- The Modal -->
            <div class="modal fade" id="classManageRemoveName">
                <div class="modal-dialog modal-lg">
                    <div class="modal-content">
                        <!-- Modal Header -->
                        <div class="modal-header">
                            <h4 class="modal-title">Class Member Management</h4>
                            <button class="close" data-dismiss="modal" type="button">&times;</button>
                        </div>
                        <!-- Modal body -->
                        <div>
                            <div class="container">
                                <h5>Remove Students from Classes</h5>
                                <h6>Enter Student and Class Details</h6>
                                <form action="/classManageRemoveName" enctype="multipart/form-data" method="POST">
                                    <!--  ########################-->
                                    <!--Student Name-->
                                    <label class="sr-only" for="stuFname">Student First Name</label>
                                    <input class="form-control" id="stuFname" name="stuFname"
                                           placeholder="Student First Name"
                                           type="stuFname">
                                    <label class="sr-only" for="stuLname">Student Last Name</label>
                                    <input class="form-control" id="stuLname" name="stuLname"
                                           placeholder="Student Last Name"
                                           type="stuLname">
                                    <label class="sr-only" for="className">Class Name</label>
                                    <input class="form-control" id="className" name="className" placeholder="Class Name"
                                           type="className">
                                    <!-- ########################-->
                                    <!--Commit Data-->
                            </div>
                            <div class="modal-footer">
                                <button class="btn btn-info btn-primary btn-sm" id="btnClassManageRemove"
                                        type="classManageRemove">Save Change
                                </button>
                                <button class="btn btn-info btn-sm" data-dismiss="modal" type="classManageRemove">
                                    Close
                                </button>
                            </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!--Adding Students to classes-->
        <!-- Button to Open the Modal -->

        <!--Modal Box for class management-->
        <!-- The Modal -->
        <div class="modal fade" id="classManageAddName">
            <div class="modal-dialog modal-lg">
                <div class="modal-content">
                    <!-- Modal Header -->
                    <div class="modal-header"><
                        <h4 class="modal-title">Class Member Management</h4>
                        <button class="close" data-dismiss="modal" type="button">&times;</button>
                    </div>
                    <!-- Modal body -->
                    <div>
                        <!--LONGBLOB FILE UPLOAD-->
                        <div class="container">
                            <h5>Add Students to Classes</h5>
                            <h6>Enter Student and Class Details</h6>
                            <form action="/classManageAddName" enctype="multipart/form-data" method="POST">
                                <!--Student Name-->
                                <label class="sr-only" for="stuFname">Student First Name</label>
                                <input class="form-control" id="stuFname" name="stuFname"
                                       placeholder="Student First Name"
                                       type="stuFname">
                                <label class="sr-only" for="stuLname">Student Last Name</label>
                                <input class="form-control" id="stuLname" name="stuLname"
                                       placeholder="Student Last Name"
                                       type="stuLname">
                                <label class="sr-only" for="className">Class Name</label>
                                <input class="form-control" id="className" name="className" placeholder="Class Name"
                                       type="className">
                                <!-- ########################-->
                                <!--Commit Data-->
                        </div>
                        <div class="modal-footer">
                            <button class="btn btn-info btn-sm" type="classManageAddName">Submit</button>
                            <!--Commit Data-->
                            <button class="btn btn-info btn-sm" data-dismiss="modal" type="classManageAddName">Close
                            </button>
                        </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>


    <!--Modal Box for PASSWORD management-->
    <!-- The Modal -->
<div class="modal fade" id="passManage">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <!-- Modal Header -->
                <div class="modal-header">
                    <h4 class="modal-title">Password Management</h4>
                    <button class="close" data-dismiss="modal" type="button">&times;</button>
                </div>
                <!-- Modal body -->
                <div>
                    <div class="container">
                        <h6>Modify Student Passwords</h6>
                        <h6>Enter Student Names and Email Address</h6>
                        <form action="/passManage" enctype="multipart/form-data" method="POST">
                            <!--  ########################-->
                            <!--Student Name-->
                            <label class="sr-only" for="stuFname">Student First Name</label>
                            <input class="form-control" id="stuFname" name="stuFname" placeholder="Student First Name"
                                   type="stuFname">
                            <label class="sr-only" for="stuLname">Student Last Name</label>
                            <input class="form-control" id="stuLname" name="stuLname" placeholder="Student Last Name"
                                   type="stuLname">
                            <label class="sr-only" for="stuEmail">Class Name</label>
                            <input class="form-control" id="stuEmail" name="stuEmail" placeholder="Student Email"
                                   type="stuEmail">
                            <h6>Enter New Password</h6>
                            <label class="sr-only" for="stuNewPass">Class Name</label>
                            <input class="form-control" id="stuNewPass" name="stuNewPass" placeholder="New Password"
                                   type="stuNewPass">
                    </div>
                    <div class="modal-footer">
                        <button class="btn btn-info btn-primary btn-sm" id="passManage" type="passManage">Save Change
                        </button>
                        <button class="btn btn-info btn-sm" data-dismiss="modal" type="passManage">Close</button>
                    </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    var ctx = document.getElementById('AverageGrades').getContext('2d');
    var _subject1Name = document.getElementById("class1Name").innerHTML;
    var _subject2Name = document.getElementById("class2Name").innerHTML;
    var _subject3Name = document.getElementById("class3Name").innerHTML;
    var _sub1Mark = document.getElementById("class1Avg").innerHTML;
    var _sub2Mark = document.getElementById("class2Avg").innerHTML;
    var _sub3Mark = document.getElementById("class3Avg").innerHTML;


    var AverageGrades = new Chart(ctx, {
        type: 'bar',
        data: {
            labels: [_subject1Name, _subject2Name, _subject3Name],
            datasets: [{
                label: 'Average Percentage',
                data: [_sub1Mark, _sub2Mark, _sub3Mark],
                backgroundColor: [
                    'rgba(255, 99, 132, 0.2)',
                    'rgba(54, 162, 235, 0.2)',
                    'rgba(255, 206, 86, 0.2)',
                    'rgba(75, 192, 192, 0.2)',
                    'rgba(153, 102, 255, 0.2)',
                    'rgba(255, 159, 64, 0.2)'
                ],
                borderColor: [
                    'rgba(255, 99, 132, 1)',
                    'rgba(54, 162, 235, 1)',
                    'rgba(255, 206, 86, 1)',
                    'rgba(75, 192, 192, 1)',
                    'rgba(153, 102, 255, 1)',
                    'rgba(255, 159, 64, 1)'
                ],
                borderWidth: 1
            }]
        },
        options: {
            scales: {
                yAxes: [{
                    ticks: {
                        beginAtZero: true
                    }
                }]
            }
        }
    });
    window.alert("sometext");
</script>

</body>
</html>